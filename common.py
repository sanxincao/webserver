from fastapi import HTTPException
import config


__message_map = {
    0: 'ok',
    1: 'ç”¨æˆ·ä¸å­˜åœ¨',
    2: 'ç”¨æˆ·è¢«ç¦ç”¨',
    3: 'è¯¥è´¦å·å·²è¿‡æœŸ',
    4: 'è¯¥è®¾å¤‡æœªæˆæƒ',
    5: 'æ‰¾ä¸åˆ°å¯¹åº”èµ„æº',
    6: 'æœåŠ¡å™¨é€»è¾‘æ‰§è¡Œå¼‚å¸¸',
    7: 'æœåŠ¡å™¨æ–‡ä»¶IOå¼‚å¸¸',
    8: 'ä¼ å…¥çš„æ•°æ®æ ¼å¼å¼‚å¸¸',
    9: 'æ•°æ®åº“æ“ä½œå¼‚å¸¸',
    10: 'ç”¨æˆ·å·²å­˜åœ¨',
    11: 'ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·ä¸å­˜åœ¨',
    12: 'ç™»å½•å¤±è´¥ï¼Œå¯†ç ä¸æ­£ç¡®',
    13: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·å·²ç¦ç”¨',
    14: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·æœ‰æ•ˆæˆæƒæœŸå·²è¿‡',
    15: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·å·²ç»‘å®šè®¾å¤‡æ•°é‡è¾¾åˆ°ä¸Šé™',
    21: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œæ®µè½æ•°å¼‚å¸¸',
    22: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œç­¾åé•¿åº¦å¼‚å¸¸',
    23: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œç­¾åé”™è¯¯',
    24: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œæ— æ³•è§£ç ',
    31: 'å—è¯•è€…ä¸å­˜åœ¨',
    32: 'è¯„æµ‹è®°å½•ä¸å­˜åœ¨',
    33: 'ç»„ä»¶ä¸å­˜åœ¨',
    34: 'è¯„æµ‹é¡¹ä¸å­˜åœ¨',
    35: 'æ–‡ä»¶ä¸å­˜åœ¨',
    36: 'æ–‡ä»¶å—ä¸å­˜åœ¨',
    41: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥å—è¯•è€…',
    42: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥è¯„æµ‹è®°å½•',
    43: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥ç»„ä»¶è¯¦æƒ…',
    44: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥è¯„æµ‹é¡¹è¯¦æƒ…',
    99: 'éæ³•æ“ä½œ'
}


class Error(HTTPException):
    '''
    0: 'ok',
    1: 'ç”¨æˆ·ä¸å­˜åœ¨',
    2: 'ç”¨æˆ·è¢«ç¦ç”¨',
    3: 'è¯¥è´¦å·å·²è¿‡æœŸ',
    4: 'è¯¥è®¾å¤‡æœªæˆæƒ',
    5: 'æ‰¾ä¸åˆ°å¯¹åº”èµ„æº',
    6: 'æœåŠ¡å™¨é€»è¾‘æ‰§è¡Œå¼‚å¸¸',
    7: 'æœåŠ¡å™¨æ–‡ä»¶IOå¼‚å¸¸',
    8: 'ä¼ å…¥çš„æ•°æ®æ ¼å¼å¼‚å¸¸',
    9: 'æ•°æ®åº“æ“ä½œå¼‚å¸¸',
    10: 'ç”¨æˆ·å·²å­˜åœ¨',
    11: 'ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·ä¸å­˜åœ¨',
    12: 'ç™»å½•å¤±è´¥ï¼Œå¯†ç ä¸æ­£ç¡®',
    13: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·å·²ç¦ç”¨',
    14: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·æœ‰æ•ˆæˆæƒæœŸå·²è¿‡',
    15: 'ç™»å½•å¤±è´¥ï¼Œè¯¥è´¦å·å·²ç»‘å®šè®¾å¤‡æ•°é‡è¾¾åˆ°ä¸Šé™',
    21: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œæ®µè½æ•°å¼‚å¸¸',
    22: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œç­¾åé•¿åº¦å¼‚å¸¸',
    23: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œç­¾åé”™è¯¯',
    24: 'å£ä»¤æ ¡éªŒå¤±è´¥ï¼Œæ— æ³•è§£ç ',
    31: 'å—è¯•è€…ä¸å­˜åœ¨',
    32: 'è¯„æµ‹è®°å½•ä¸å­˜åœ¨',
    33: 'ç»„ä»¶ä¸å­˜åœ¨',
    34: 'è¯„æµ‹é¡¹ä¸å­˜åœ¨',
    35: 'æ–‡ä»¶ä¸å­˜åœ¨',
    36: 'æ–‡ä»¶å—ä¸å­˜åœ¨',
    41: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥å—è¯•è€…',
    42: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥è¯„æµ‹è®°å½•',
    43: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥ç»„ä»¶è¯¦æƒ…',
    44: 'éæ³•æ“ä½œï¼Œæ— æƒè·å–è¯¥è¯„æµ‹é¡¹è¯¦æƒ…',
    99: 'éæ³•æ“ä½œ'
    '''

    def __init__(self, code: int = 0):
        self.status_code = 200
        self.code = code


def success(data: dict = {}):
    return {
        **data,
        'code': 0,
        'message': 'ok'
    }


def fail(code: int, data: dict = {}):
    return {
        **data,
        'code': code,
        'message': __message_map[code],
    }


def add_salt(string: str, type: int = 0):
    if type == 1:
        return f'ğŸ˜‚å·¦åŠ ä¸€ä¸ªå˜å˜ç›ğŸ˜‚{string}ğŸ˜Šå³åŠ ä¸€ä¸ªå˜Ÿå˜Ÿç›ğŸ˜Š'
    else:
        return f'ğŸ¤­å·¦åŠ ä¸€ä¸ªå˜»å˜»ç›ğŸ¤­{string}ğŸ˜„å³åŠ ä¸€ä¸ªå“ˆå“ˆç›ğŸ˜„'
    
    
def generate_function_and_component_list(function_type, function_list) -> dict:
    'é€šè¿‡`function_type`(total/white/black) ç”Ÿæˆç›¸åº”çš„åŠŸèƒ½åˆ—è¡¨ä¸ç»„ä»¶åˆ—è¡¨'
    total_function_list = config.get('function_list')
    user_function_list = []
    if function_type == 'total':
        user_function_list = [item['id'] for item in total_function_list]
    elif function_type == 'white':
        user_function_list = [item['id'] for item in total_function_list if item['id'] in function_list]
    elif function_type == 'black':
        user_function_list = [item['id'] for item in total_function_list if item['id'] not in function_list]
    user_component_list = ['backend']
    for function_id in user_function_list:
        for function in total_function_list:
            if function_id == function['id']:
                user_component_list += function['component']
    user_component_list = list(set(user_component_list))
    return {
        'function_list': user_function_list,
        'component_list': user_component_list
    }



        